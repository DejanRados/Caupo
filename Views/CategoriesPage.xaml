<UserControl x:Class="Caupo.Views.CategoriesPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Caupo.Views"
             xmlns:vm="clr-namespace:Caupo.ViewModels"
             mc:Ignorable="d" 
             d:DesignHeight="700" d:DesignWidth="1300">
    <UserControl.DataContext>
        <vm:CategoriesViewModel/>
    </UserControl.DataContext>

    <Grid >
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="0.2*"/>
            <RowDefinition Height="*"/>
    
        </Grid.RowDefinitions>
        <!-- Header -->
        <Grid HorizontalAlignment="Stretch" VerticalAlignment="Top" Height="55" Background="#323232" Grid.Row="0" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="0.2*"/>
            </Grid.ColumnDefinitions>
            <Image Source="pack://application:,,,/Images/dsoftlogosmall.png" Width="50" Height="50" Grid.Column="0" HorizontalAlignment="Left" Margin="20,0,0,0"/>
            <Label x:Name="lblApp" Content="Caupo - Kategorije" Foreground="#fafafa" FontSize="25" Grid.Column="0" HorizontalAlignment="Center"  VerticalAlignment="Center"/>
            <Label x:Name="lblUlogovaniKorisnik" Content="Ime i prezime" Foreground="#fafafa" FontSize="16" Grid.Column="1" HorizontalAlignment="Right"  VerticalAlignment="Center"/>
            <Button x:Name="CloseButton" Style="{StaticResource CloseButtonStyle}"  VerticalAlignment="Top" HorizontalAlignment="Right" Padding="0" Margin="1" Click="CloseButton_Click" Grid.Column="2" />
        </Grid>
        <!-- Buttons -->
        <Grid  Grid.Row="1" HorizontalAlignment="Left" Margin="20,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>

            </Grid.ColumnDefinitions>
            <Viewbox Stretch="Uniform" MinWidth="100" MaxWidth="160"  Margin="2" Grid.Column="0">
                <Button Style="{StaticResource PrimaryButtonStyle}"   Margin="5"     x:Name="BtnEdit"     Width="120"    Height="50"   Command="{Binding EditCommand}">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                        <TextBlock FontFamily="pack://application:,,,/Assets/Fonts/#codicon" Margin="6" FontSize="24" Width="30" FontWeight="ExtraLight" Text="&#60019;" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        <TextBlock Text="Izmjeni"  VerticalAlignment="Center"   />
                    </StackPanel>
                </Button>
            </Viewbox>
            <Viewbox Stretch="Uniform" MinWidth="100" MaxWidth="160"  Margin="2" Grid.Column="1">
                <Button Style="{StaticResource PrimaryButtonStyle}"   Margin="6"  x:Name="BtnAdd"     Width="120"    Height="50"     Command="{Binding AddCommand}" >
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock FontFamily="pack://application:,,,/Assets/Fonts/#codicon" Margin="6" FontSize="24" Width="30" FontWeight="ExtraLight" Text="&#60000;"  HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        <TextBlock Text="Dodaj"  VerticalAlignment="Center"   />
                    </StackPanel>
                </Button>
            </Viewbox>
            <Viewbox Stretch="Uniform" MinWidth="100" MaxWidth="160"  Margin="2" Grid.Column="2">
                <Button Style="{StaticResource PrimaryButtonStyle}"  Margin="5"  x:Name="BtnDelete"    Width="120"    Height="50"      Command="{Binding DeleteCommand}">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock FontFamily="pack://application:,,,/Assets/Fonts/#codicon" Margin="6" FontSize="24" Width="30" FontWeight="ExtraLight" Text="&#60033;"  HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        <TextBlock Text="Obriši"  VerticalAlignment="Center"   />
                    </StackPanel>
                </Button>
            </Viewbox>
           

        </Grid>

        <!-- DataGrid -->
        <DataGrid Grid.Row="2" HorizontalAlignment="Left" MinWidth="400" Margin="40,20,0,40" VerticalAlignment="Stretch"
                  ItemsSource="{Binding Kategorije}"
                  SelectedItem="{Binding SelectedKategorija}"
                  AutoGenerateColumns="False"
                  GridLinesVisibility="None"
                  HeadersVisibility="Column"
                  CanUserAddRows="False"
                  CanUserResizeRows="False"
                  CanUserSortColumns="False"
                  RowHeight="35"
                  HorizontalScrollBarVisibility="Disabled"
                  Background="Transparent"
                  BorderThickness="0"
                  ClipToBounds="True"
                  BorderBrush="{DynamicResource GlobalFontColor}"
                  ScrollViewer.VerticalScrollBarVisibility="Auto"
                  SelectionMode="Single" >
            <DataGrid.Resources>
                <Style TargetType="ScrollBar" BasedOn="{StaticResource WideVerticalScrollBar}"/>
            </DataGrid.Resources>
            <DataGrid.Columns>
                <DataGridTextColumn Header="Kategorija" Binding="{Binding Kategorija}" Width="200"/>
                <DataGridTextColumn Header="Vrsta" Binding="{Binding VrstaArtiklaName}" Width="200"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Popup -->
        <Popup IsOpen="{Binding IsPopupOpen}" Placement="Center">
            <Border Background="White" Padding="15" BorderBrush="Gray" BorderThickness="1">
                <StackPanel Width="400" Height="200">
                    <TextBlock Text="Kategorija" Margin="10,10,0,0"/>
                    <TextBox Text="{Binding EditKategorija.Kategorija}" Style="{DynamicResource TextBoxCustom}" Margin="10,10,0,0" CaretBrush="{DynamicResource GlobalFontColor}"/>

                    <TextBlock Text="Vrsta artikla" Margin="10,10,0,0"/>
                    <ComboBox SelectedValue="{Binding EditKategorija.VrstaArtikla}" Margin="10,10,0,0"
                              SelectedValuePath="Tag">
                        <ComboBoxItem Content="Piće" Tag="0"/>
                        <ComboBoxItem Content="Hrana" Tag="1"/>
                        <ComboBoxItem Content="Ostalo" Tag="2"/>
                    </ComboBox>

                    <Grid HorizontalAlignment="Center" Margin="25" VerticalAlignment="Bottom">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Button Style="{StaticResource CancelButtonStyle}"  Margin="10,0"   Width="120"    Height="50"   Foreground="{DynamicResource GlobalFontColor}"     Command="{Binding CancelCommand}" Grid.Column="0" HorizontalAlignment="Right">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <TextBlock FontFamily="Segoe MDL2 Assets" Margin="6" FontSize="24" Width="30" FontWeight="ExtraLight" Text="&#xE711;" Foreground="{DynamicResource GlobalFontColor}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                <TextBlock Text="Odustani"  VerticalAlignment="Center"  Foreground="{DynamicResource GlobalFontColor}" />
                            </StackPanel>
                        </Button>

                        <Button  Style="{StaticResource PrimaryButtonStyle}"    x:Name="SaveAddButton"    Width="120"    Height="50"     Command="{Binding SaveCommand}" Grid.Column="1" HorizontalAlignment="Left">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <TextBlock FontFamily="Segoe MDL2 Assets" Margin="6" FontSize="24" Width="30" FontWeight="ExtraLight" Text="&#xE74E;"  HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                <TextBlock Text="Spremi"  VerticalAlignment="Center"  />
                            </StackPanel>
                        </Button>
                    </Grid>
                </StackPanel>
            </Border>
        </Popup>
    </Grid>
</UserControl>
