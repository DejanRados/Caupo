<UserControl x:Class="Caupo.Views.ReceiptsPage"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:system="clr-namespace:System;assembly=mscorlib"
        xmlns:local="clr-namespace:Caupo.ViewModels"
        xmlns:loc="clr-namespace:Caupo.Helpers"
         xmlns:syncfusionskin ="clr-namespace:Syncfusion.SfSkinManager;assembly=Syncfusion.SfSkinManager.WPF" 
         xmlns:svg="http://sharpvectors.codeplex.com/svgc/" xmlns:Caupo="clr-namespace:Caupo"
        mc:Ignorable="d"
        UseLayoutRounding="True">
  
      

    <Grid>
        <!-- Header -->
        <Grid HorizontalAlignment="Stretch" VerticalAlignment="Top" Height="55" Background="#323232" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="0.2*"/>
            </Grid.ColumnDefinitions>
            <Image Source="pack://application:,,,/Images/dsoftlogosmall.png" Width="50" Height="50" Grid.Column="0" HorizontalAlignment="Left" Margin="20,0,0,0"/>
            <Label x:Name="lblApp" Content="Caupo - Računi" Foreground="#fafafa" FontSize="25" Grid.Column="0" HorizontalAlignment="Center"  VerticalAlignment="Center"/>
            <Label x:Name="lblUlogovaniKorisnik" Content="Ime i prezime" Foreground="#fafafa" FontSize="16" Grid.Column="1" HorizontalAlignment="Right"  VerticalAlignment="Center"/>
            <Button x:Name="CloseButton" Style="{StaticResource CloseButtonStyle}"  VerticalAlignment="Top" HorizontalAlignment="Right" Padding="0" Margin="1" Click="CloseButton_Click" Grid.Column="2" />
        </Grid>

        <!-- Glavni grid -->
        <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="0.6*"/>
                <ColumnDefinition Width="0.4*"/>

            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="0.20*"/>
                <RowDefinition Height="0.35*"/>
                <RowDefinition Height="0.5*"/>
            </Grid.RowDefinitions>


           
            <Grid  Grid.Row="0" Grid.Column="5" Grid.ColumnSpan="2" Margin="10,60,60,0" HorizontalAlignment="Right" VerticalAlignment="Center">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Viewbox Stretch="Uniform" MinWidth="100" MaxWidth="160"  Margin="2" Grid.Column="0">
                    <Button Style="{StaticResource PrimaryButtonStyle}"  Margin="5"  x:Name="BtnStorno" Click="BtnStorno_Click"    Width="120"    Height="50"   Foreground="{DynamicResource GlobalFontColor}"   >
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBlock FontFamily="pack://application:,,,/Assets/Fonts/#codicon" Margin="0,0,10,0" FontSize="28"  FontWeight="ExtraLight" Text="&#xEABF;" Foreground="{DynamicResource GlobalFontColor}" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                            <TextBlock Text="Storno"  VerticalAlignment="Center"  Foreground="{DynamicResource GlobalFontColor}" />
                        </StackPanel>
                    </Button>
                </Viewbox>
                <Viewbox Stretch="Uniform" MinWidth="100" MaxWidth="160"  Margin="2" Grid.Column="1">
                    <Button Style="{StaticResource PrimaryButtonStyle}"   Margin="5"     x:Name="BtnDuplicate"  Click="BtnDuplicate_Click"   Width="120"    Height="50"   Foreground="{DynamicResource GlobalFontColor}"    >
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" >
                            <TextBlock FontFamily="pack://application:,,,/Assets/Fonts/#codicon" Margin="0,0,10,0" FontSize="32"  FontWeight="ExtraLight" Text="&#xEA95;" Foreground="{DynamicResource GlobalFontColor}" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                            <TextBlock Text="Duplikat "  VerticalAlignment="Center"  Foreground="{DynamicResource GlobalFontColor}" />
                        </StackPanel>
                    </Button>
                </Viewbox>

            </Grid>
   
            <!--  Search TextBox -->
            <StackPanel Orientation="Horizontal" Grid.Row="0"  Grid.Column="0" Margin="30,60,0,0"  >
                <Border Padding="5" Width="300" Height="50" HorizontalAlignment="Left"  BorderThickness="2" Background="Transparent"  BorderBrush="#774A6FA5" CornerRadius="15" >
                    <DockPanel Grid.Row="1" Grid.Column="1" Margin="1" >
                        <TextBlock FontFamily="pack://application:,,,/Assets/Fonts/#codicon" Margin="5" FontSize="24" Width="30" FontWeight="ExtraLight" Text="&#60013;" Foreground="{DynamicResource GlobalFontColor}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        <TextBox x:Name="SearchTextBox" Style="{StaticResource TextBoxCustom}" CaretBrush="{DynamicResource GlobalFontColor}"  Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}" Foreground="{DynamicResource GlobalFontColor}"  FontSize="16" HorizontalAlignment="Stretch" VerticalContentAlignment="Center" Background="Transparent" BorderBrush="Transparent" Padding="5" >

                    </TextBox>
                </DockPanel>
                </Border>

                <Button Style="{StaticResource SecondaryButtonStyle}" x:Name="BtnFirst" Click="BtnFirst_Click"   Width="50" Height="50" VerticalAlignment="Center"   Grid.Column="0" HorizontalAlignment="Center" ToolTip="Prvi artikl" Margin="10,0,0,0">
                    <TextBlock 
                       FontFamily="pack://application:,,,/Assets/Fonts/#codicon"
                       FontSize="24"
                       FontWeight="ExtraLight"
                       Text="&#60271;" 
                       Foreground="{DynamicResource GlobalFontColor}"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"/>
                </Button>
                <Button Style="{StaticResource SecondaryButtonStyle}"  x:Name="BtnLast" Click="BtnLast_Click" Width="50" Height="50" Padding="0"  VerticalAlignment="Center"  Grid.Column="2" ToolTip="Naredni artikl" Margin="10,0,0,0" >
                    <TextBlock 
                      FontFamily="pack://application:,,,/Assets/Fonts/#codicon"
                      FontSize="24"
                      FontWeight="ExtraLight"
                      Text="&#60272;" 
                      Foreground="{DynamicResource GlobalFontColor}"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"/>
                </Button>


            </StackPanel>
          
            <Border Grid.Row="1"  Grid.Column="0" BorderThickness="1" BorderBrush="{DynamicResource GlobalFontColor}" Margin="30,10" MaxWidth="500" MinWidth="400" CornerRadius="10" HorizontalAlignment="Left">
                <Grid DataContext="{Binding SelectedReceipt}" Margin="30">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
             
                <!-- Row 0 -->
                <TextBlock Grid.Row="0" Grid.Column="0" Text="Broj:"/>
                    <TextBlock Grid.Row="0" Grid.Column="1"  Text="{Binding BrojRacuna}" FontSize="16" TextAlignment="Left" Margin="10,0"/>

                <!-- Row 1 -->
                <TextBlock Grid.Row="1" Grid.Column="0" Text="Datum:"/>
                    <TextBlock Grid.Row="1" Grid.Column="1"  Text="{Binding Datum, StringFormat=dd.MM.yyyy}" TextAlignment="Left" Margin="10,0"/>

                <!-- Row 2 -->
                <TextBlock Grid.Row="2" Grid.Column="0" Text="Kupac:"/>
                    <TextBlock Grid.Row="2" Grid.Column="1"  Text="{Binding Kupac}" TextAlignment="Left" Margin="10,0"/>

                <!-- Row 3 -->
                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Način plaćanja:" />
                    <TextBlock Grid.Row="3" Grid.Column="1"     Text="{Binding NacinPlacanjaName, StringFormat=N2}" TextAlignment="Left" Margin="10,0"/>

                <!-- Row 4 -->
                <TextBlock Grid.Row="4" Grid.Column="0" Text="Izdao:"/>
                    <TextBlock Grid.Row="4" Grid.Column="1"  Text="{Binding RadnikName}" TextAlignment="Left" Margin="10,0"/>

                <!-- Row 5 -->
                <TextBlock Grid.Row="5" Grid.Column="0" Text="Broj fis. računa:"/>
                    <TextBlock Grid.Row="5" Grid.Column="1"  Text="{Binding BrojFiskalnogRacuna}" TextAlignment="Left" Margin="10,0"/>

              
            </Grid>
            </Border>
          
            <DataGrid x:Name="ListaRacuna" VerticalAlignment="Top" HorizontalAlignment="Left"
                          Grid.Row="2"  Grid.Column="0" Margin="30,0,0,30"
                          MaxWidth="950" MaxHeight="800"
                          SelectionChanged="ListaRacuna_SelectionChanged" 
                          GridLinesVisibility="None"
                          ItemsSource="{Binding ReceiptsFilter}"
                          SelectedItem="{Binding SelectedReceipt, Mode=TwoWay}" 
                          AutoGenerateColumns="False"
                          HeadersVisibility="Column"
                          CanUserAddRows="False"
                          CanUserResizeRows="False"
                          CanUserSortColumns="False"
                          RowHeight="35"
                          HorizontalScrollBarVisibility="Disabled"
                          Background="Transparent"
                          BorderThickness="0"
                          ClipToBounds="True"
                          RowStyle="{StaticResource ReklamiranDataGridRowStyle}"
                          BorderBrush="{DynamicResource GlobalFontColor}"
                          ScrollViewer.VerticalScrollBarVisibility="Auto"
                          SelectionMode="Single">
                
               

       
              
                <DataGrid.Resources>
                        <Style TargetType="ScrollBar" BasedOn="{StaticResource WideVerticalScrollBar}"/>
                    </DataGrid.Resources>
                    <DataGrid.Columns>

                        <DataGridTemplateColumn Header="Broj računa" Width="100" >
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding BrojRacuna}" TextWrapping="Wrap" HorizontalAlignment="Center"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn Header="Br. fis. računa" Width="1.5*" >
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding BrojFiskalnogRacuna}"   TextAlignment="Left"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn Header="Datum" Width="*">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Datum, StringFormat={}{0:dd.MM.yyyy HH:mm}}" 
                           TextAlignment="Center"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn Header="Način plaćanja" Width="*">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding NacinPlacanjaName}"
          TextAlignment="Center"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn Header="Radnik" Width="*">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding RadnikName}"
                           TextAlignment="Right"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn Header="Kupac" Width="*">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Kupac}"
                                   TextAlignment="Right" Padding="10"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                    </DataGrid.Columns>
                </DataGrid>
      
            <Grid Grid.Row="1" Grid.Column="1" Grid.RowSpan="2"  VerticalAlignment="Top" Margin="0,0,0,100" >
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <DataGrid x:Name="ListaStavki" Margin="20,0" VerticalAlignment="Top" Grid.Row="0"
                          GridLinesVisibility="None"
                          ItemsSource="{Binding ReceiptItems}"
                          SelectedItem="{Binding SelectedItem, Mode=TwoWay}"
                          AutoGenerateColumns="False"
                          HeadersVisibility="Column"
                          CanUserAddRows="False"
                          CanUserResizeRows="False"
                          CanUserSortColumns="False"
                          RowHeight="35"
                          HorizontalScrollBarVisibility="Disabled"
                          Background="Transparent"
                          BorderThickness="0"
                          ScrollViewer.VerticalScrollBarVisibility="Auto"
                          SelectionMode="Single">
                  
                  
                    <DataGrid.Resources>
                        <Style TargetType="ScrollBar" BasedOn="{StaticResource WideVerticalScrollBar}"/>
                    </DataGrid.Resources>
                    <DataGrid.Columns>

                        <DataGridTemplateColumn Header="Artikl" Width="2*" >
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding ArtiklNormativ}" TextWrapping="Wrap"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn Header="Kol" Width="*">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Kolicina, StringFormat={}{0:0.00}}" 
                               TextAlignment="Right"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn Header="Cijena" Width="*">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Cijena, StringFormat={}{0:0.00}}" 
                               TextAlignment="Right"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn Header="Iznos" Width="*">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding BrojRacuna, StringFormat={}{0:0.00}}" 
                               TextAlignment="Center"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                    </DataGrid.Columns>
                </DataGrid>

                <Label Grid.Row="1" Grid.Column="1" HorizontalContentAlignment="Right"  ContentStringFormat="IZNOS:   {0:0.00}" FontSize="24" Margin="00,15,50,0" Foreground="{DynamicResource GlobalFontColor}" Content="{Binding IznosRacuna}"/>
            </Grid>

      
        </Grid>
    </Grid>
</UserControl>
